"use strict";(self["webpackChunkbroadcastfe"]=self["webpackChunkbroadcastfe"]||[]).push([[238],{270:(e,a,n)=>{n.r(a),n.d(a,{default:()=>z});var o=n(9835),l=n(6970),t=n(499),i=n(9302),r=n(3878),s=n.n(r),m=n(1569),c=n(7071),d=n(1442);const p={class:"row justify-between items-center"},u={class:"bord"},f={class:"q-mt-md row justify-center"},g={setup(e){const a=[{name:"name",align:"center",label:"Name",field:"name",sortable:!0},{name:"email",align:"center",label:"E-Mail",field:"email",sortable:!0},{name:"admin",align:"center",label:"Admin",field:"admin",sortable:!0},{name:"zones",align:"center",label:"Zones",field:"zones",sortable:!0},{name:"numberOfLogin",align:"center",label:"Logins",field:"numberOfLogin",sortable:!0},{name:"createdAt",align:"center",label:"Created",field:"createdAt",sortable:!0},{name:"lastLogin",align:"center",label:"Last Login",field:"lastLogin",sortable:!0},{name:"actions",align:"center",label:"Actions"}],n=(0,i.Z)(),r=((0,t.iH)(""),(0,t.iH)([]));async function g(){const e=await m.api.get("/auth/users");r.value=e.data.users}const w=(0,t.iH)({sortBy:"desc",descending:!1,page:1,rowsPerPage:10}),b=(0,t.iH)(""),k=(0,o.Fl)((()=>Math.ceil(r.value.length/w.value.rowsPerPage)));async function y(e){n.dialog({component:d.Z,componentProps:{icon:"warning",iconColor:"yellow",title:"관리자 권한",caption:"관리자 권한을 부여하거나 회수합니다.",message:`${e.email}의 관리자 권한이 변경 됩니다.`}}).onOk((async()=>{await m.api.get(`/auth/setadmin?id=${e._id}&admin=${!e.admin}`),await g()}))}async function h(e){n.dialog({component:d.Z,componentProps:{icon:"warning",iconColor:"red",title:"사용자 계정 삭제",caption:"사용자 계정을 삭제합니다.",message:`${e.email} 계정을 삭제 하시겠습니까?`}}).onOk((async()=>{await m.api.get(`/auth/deleteuser?id=${e._id}`),await g()}))}return(0,o.bv)((()=>{g()})),(e,n)=>{const i=(0,o.up)("q-icon"),m=(0,o.up)("q-input"),d=(0,o.up)("q-td"),g=(0,o.up)("q-btn"),v=(0,o.up)("q-tr"),W=(0,o.up)("q-table"),_=(0,o.up)("q-pagination");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",p,[(0,o.Wm)(c.Z,{name:"사용자 관리",caption:"사용자 권한 변경 및 계정 관리",icon:"svguse:icons.svg#usersColor"}),(0,o._)("div",null,[(0,o.Wm)(m,{modelValue:b.value,"onUpdate:modelValue":n[0]||(n[0]=e=>b.value=e),filled:"",dense:"",clearable:"",label:"Search"},{append:(0,o.w5)((()=>[(0,o.Wm)(i,{name:"search"})])),_:1},8,["modelValue"])])]),(0,o._)("div",u,[(0,o.Wm)(W,{style:{"border-radius":"0.5rem"},"table-header-class":"text-h6 text-bold bg-grey-2",rows:r.value,columns:a,flat:"","hide-pagination":"",pagination:w.value,filter:b.value},{body:(0,o.w5)((e=>[(0,o.Wm)(v,{props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{key:"name",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.row.name),1)])),_:2},1032,["props"]),(0,o.Wm)(d,{key:"email",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.row.email),1)])),_:2},1032,["props"]),(0,o.Wm)(d,{key:"admin",props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{style:{cursor:"pointer"},name:e.row.admin?"fas fa-circle-check":"fas fa-ban",color:e.row.admin?"green":"red",onClick:a=>y(e.row)},null,8,["name","color","onClick"])])),_:2},1032,["props"]),(0,o.Wm)(d,{key:"zones",props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{icon:"fas fa-folder-tree",size:"sm",flat:"",round:"",color:"primary"})])),_:2},1032,["props"]),(0,o.Wm)(d,{key:"numberOfLogin",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.row.numberOfLogin),1)])),_:2},1032,["props"]),(0,o.Wm)(d,{key:"createdAt",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)((0,t.SU)(s())(e.row.createdAt).format("YYYY-MM-DD hh:mm:ss a")),1)])),_:2},1032,["props"]),(0,o.Wm)(d,{key:"lastLogin",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)((0,t.SU)(s())(e.row.lastLogin).format("YYYY-MM-DD hh:mm:ss a")),1)])),_:2},1032,["props"]),(0,o.Wm)(d,{key:"actions",props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{icon:"fas fa-trash",flat:"",round:"",size:"sm",color:"red-10",onClick:a=>h(e.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","pagination","filter"])]),(0,o._)("div",f,[(0,o.Wm)(_,{modelValue:w.value.page,"onUpdate:modelValue":n[1]||(n[1]=e=>w.value.page=e),max:(0,t.SU)(k),"max-pages":10,"direction-links":"","boundary-links":""},null,8,["modelValue","max"])])],64)}}};var w=n(6611),b=n(2857),k=n(1746),y=n(9546),h=n(7220),v=n(4455),W=n(3044),_=n(9984),Z=n.n(_);const L=g,z=L;Z()(g,"components",{QInput:w.Z,QIcon:b.Z,QTable:k.Z,QTr:y.Z,QTd:h.Z,QBtn:v.Z,QPagination:W.Z})}}]);