"use strict";(self["webpackChunkbroadcastfe"]=self["webpackChunkbroadcastfe"]||[]).push([[472],{8957:(e,o,l)=>{l.d(o,{Z:()=>t});var a=l(9302);function t(){const e=(0,a.Z)();function o(o){var l;return e.notify({icon:"fas fa-circle-info",message:o.message,caption:null!==(l=o.caption)&&void 0!==l?l:"",position:"top",color:"positive",actions:[{icon:"close",round:!0,size:"sm",color:"white",handler:()=>{}}]})}function l(o){var l;return e.notify({icon:"fas fa-circle-info",message:o.message,caption:null!==(l=o.caption)&&void 0!==l?l:"",position:"top",color:"orange",actions:[{icon:"close",round:!0,size:"sm",color:"white",handler:()=>{}}]})}function t(o){var l;return e.notify({icon:"fas fa-triangle-exclamation",message:o.message,caption:null!==(l=o.caption)&&void 0!==l?l:"",position:"top",color:"negative",textColor:"white",actions:[{icon:"close",round:!0,size:"sm",color:"white",handler:()=>{}}]})}return{notifyInfo:o,notifyWarn:l,notifyError:t}}},9e3:(e,o,l)=>{l.d(o,{C1:()=>t,SO:()=>n,gm:()=>r,gs:()=>c,m0:()=>s,tM:()=>i,u5:()=>u,wX:()=>d});var a=l(1569);const t=e=>!!e||"필수 입력 항목 입니다.",n=e=>/.+@.+\..+/.test(e)||"올바른 형식이 아닙니다",i=e=>e.length>=8||"최소 8자 이상 입력하세요",s=async e=>{const o=await a.api.get(`/auth/checkEmail?email=${e}`);return!o||!o.data.status||"이미 사용중인 이메일 입니다."},d=e=>/^(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}$/gm.test(e)||"IPv4 형식이 아닙니다",r=async e=>{const o=await a.api.get(`/device/ipexists?ipaddr=${e}`);return!o||!o.data.result||"이미 사용중인 아이피 입니다."},c=e=>e>0||"0 보다 큰 숫자를 입력하세요",u=async e=>{const o=await a.api.get(`/device/exists?index=${e}`);return!o||!o.data.result||"이미 사용중인 아이디 입니다."}},1442:(e,o,l)=>{l.d(o,{Z:()=>k});l(702);var a=l(9835),t=l(499),n=l(6970),i=l(4182);const s={key:0,class:"q-mr-md"},d={props:{icon:String,iconColor:String,title:String,caption:String,message:String},emits:[...i.Z.emits],setup(e,{emit:o}){const{dialogRef:l,onDialogHide:d,onDialogOK:r,onDialogCancel:c}=(0,i.Z)();return(o,i)=>{const u=(0,a.up)("q-icon"),m=(0,a.up)("q-item-label"),p=(0,a.up)("q-item-section"),f=(0,a.up)("q-card-section"),g=(0,a.up)("q-btn"),w=(0,a.up)("q-card-actions"),v=(0,a.up)("q-card"),y=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.j4)(y,{ref_key:"dialogRef",ref:l,onHide:(0,t.SU)(d)},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{class:"q-dialog-plugin",style:{"border-radius":"8px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{class:"row no-wrap items-center"},{default:(0,a.w5)((()=>[e.icon?((0,a.wg)(),(0,a.iD)("div",s,[(0,a.Wm)(u,{name:e.icon,color:e.iconColor?e.iconColor:"primary",size:"32px"},null,8,["name","color"])])):(0,a.kq)("",!0),(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(m,{class:"text-h6 text-bold"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.title),1)])),_:1}),e.caption?((0,a.wg)(),(0,a.j4)(m,{key:0,caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.caption),1)])),_:1})):(0,a.kq)("",!0)])),_:1})])),_:1}),(0,a.Wm)(f,{class:"text-center"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.message),1)])),_:1}),(0,a.Wm)(w,{align:"right"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{style:{width:"80px"},label:"취소",flat:"",rounded:"",onClick:(0,t.SU)(c)},null,8,["onClick"]),(0,a.Wm)(g,{style:{width:"80px"},label:"확인",class:"text-primary",flat:"",rounded:"",onClick:(0,t.SU)(r)},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["onHide"])}}};var r=l(3706),c=l(4458),u=l(3190),m=l(2857),p=l(1233),f=l(3115),g=l(1821),w=l(4455),v=l(9984),y=l.n(v);const b=d,k=b;y()(d,"components",{QDialog:r.Z,QCard:c.Z,QCardSection:u.Z,QIcon:m.Z,QItemSection:p.Z,QItemLabel:f.Z,QCardActions:g.Z,QBtn:w.Z})},7071:(e,o,l)=>{l.d(o,{Z:()=>p});var a=l(9835),t=l(6970);const n={props:{name:String,caption:String,icon:String},setup(e){return(o,l)=>{const n=(0,a.up)("q-icon"),i=(0,a.up)("q-item-section"),s=(0,a.up)("q-item-label"),d=(0,a.up)("q-item");return(0,a.wg)(),(0,a.j4)(d,null,{default:(0,a.w5)((()=>[(0,a.Wm)(i,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{name:e.icon,size:"md"},null,8,["name"])])),_:1}),(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,t.zw)(e.name),1)])),_:1}),(0,a.Wm)(s,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,t.zw)(e.caption),1)])),_:1})])),_:1})])),_:1})}}};var i=l(490),s=l(1233),d=l(2857),r=l(3115),c=l(9984),u=l.n(c);const m=n,p=m;u()(n,"components",{QItem:i.Z,QItemSection:s.Z,QIcon:d.Z,QItemLabel:r.Z})},5472:(e,o,l)=>{l.r(o),l.d(o,{default:()=>X});var a=l(9835),t=l(499),n=l(6970),i=l(9302),s=l(1569);let d=(0,t.iH)([]);(0,t.iH)([]);async function r(){const e=await s.api.get("device");d.value=e.data}const c=[{name:"index",align:"center",label:"ID",field:"index",sortable:!0},{name:"name",align:"center",label:"Name",field:"name",sortable:!0},{name:"ipaddress",align:"center",label:"IP Address",field:"ipaddress",sortable:!0},{name:"deviceType",align:"center",label:"Device Type",field:"deviceType",sortable:!0},{name:"mode",align:"center",label:"Active Mode",field:"mode",sortable:!0},{name:"actions",align:"center",label:"Actions"}];var u=l(8957),m=l(7071),p=(l(702),l(4182)),f=l(9e3);const g=(0,a.Uk)(" 하드웨어 추가/수정 "),w={props:{item:Object},emits:[...p.Z.emits],setup(e,{emit:o}){const l=e,{dialogRef:n,onDialogHide:i,onDialogOK:s,onDialogCancel:d}=(0,p.Z)(),r=(0,t.iH)(!1),c=(0,t.qj)({index:null,name:"",ipaddress:"",deviceType:"",mode:""});function u(){s(c)}return(0,a.bv)((()=>{l.item&&(c.index=l.item.index,c.name=l.item.name,c.ipaddress=l.item.ipaddress,c.deviceType=l.item.deviceType,c.mode=l.item.mode,r.value=!0)})),(e,o)=>{const l=(0,a.up)("q-icon"),s=(0,a.up)("q-item-label"),m=(0,a.up)("q-item-section"),p=(0,a.up)("q-card-section"),w=(0,a.up)("q-separator"),v=(0,a.up)("q-input"),y=(0,a.up)("q-select"),b=(0,a.up)("q-btn"),k=(0,a.up)("q-card-actions"),W=(0,a.up)("q-form"),_=(0,a.up)("q-card"),U=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.j4)(U,{ref_key:"dialogRef",ref:n,persistent:"",onHide:(0,t.SU)(i)},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{class:"q-dialog-plugin",style:{"border-radius":"8px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(W,{onSubmit:u},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{class:"row no-wrap items-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(l,{class:"q-mr-md",name:"svguse:icons.svg#serverColorPlus",size:"sm"}),(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(s,{class:"text-bold",style:{"font-size":"18px"}},{default:(0,a.w5)((()=>[g])),_:1})])),_:1})])),_:1}),(0,a.Wm)(w),(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(v,{modelValue:(0,t.SU)(c).index,"onUpdate:modelValue":o[0]||(o[0]=e=>(0,t.SU)(c).index=e),dense:"",filled:"",label:"ID",type:"number",disable:r.value,"lazy-rules":"",rules:[(0,t.SU)(f.C1),(0,t.SU)(f.gs),(0,t.SU)(f.u5)]},null,8,["modelValue","disable","rules"]),(0,a.Wm)(v,{modelValue:(0,t.SU)(c).name,"onUpdate:modelValue":o[1]||(o[1]=e=>(0,t.SU)(c).name=e),dense:"",filled:"",label:"Name","lazy-rules":"",rules:[(0,t.SU)(f.C1)]},null,8,["modelValue","rules"]),(0,a.Wm)(v,{modelValue:(0,t.SU)(c).ipaddress,"onUpdate:modelValue":o[2]||(o[2]=e=>(0,t.SU)(c).ipaddress=e),dense:"",filled:"",label:"IP Address",disable:r.value,"lazy-rules":"",rules:[(0,t.SU)(f.C1),(0,t.SU)(f.wX),(0,t.SU)(f.gm)]},null,8,["modelValue","disable","rules"]),(0,a.Wm)(y,{modelValue:(0,t.SU)(c).deviceType,"onUpdate:modelValue":o[3]||(o[3]=e=>(0,t.SU)(c).deviceType=e),dense:"",filled:"",label:"Device Type",options:["Q-Sys","Barix"],"lazy-rules":"",rules:[(0,t.SU)(f.C1)]},null,8,["modelValue","rules"]),"Barix"===(0,t.SU)(c).deviceType?((0,a.wg)(),(0,a.j4)(y,{key:0,modelValue:(0,t.SU)(c).mode,"onUpdate:modelValue":o[4]||(o[4]=e=>(0,t.SU)(c).mode=e),dense:"",filled:"",label:"Mode",options:["Send","Receive"],"lazy-rules":"",rules:[(0,t.SU)(f.C1)]},null,8,["modelValue","rules"])):(0,a.kq)("",!0)])])),_:1}),(0,a.Wm)(k,{align:"right"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{style:{width:"80px"},label:"취소",flat:"",rounded:"",onClick:(0,t.SU)(d)},null,8,["onClick"]),(0,a.Wm)(b,{style:{width:"80px"},label:"확인",class:"text-primary",flat:"",rounded:"",type:"submit"})])),_:1})])),_:1})])),_:1})])),_:1},8,["onHide"])}}};var v=l(3706),y=l(4458),b=l(8326),k=l(3190),W=l(2857),_=l(1233),U=l(3115),S=l(926),h=l(6611),Z=l(7887),q=l(1821),C=l(4455),x=l(9984),Q=l.n(x);const z=w,V=z;Q()(w,"components",{QDialog:v.Z,QCard:y.Z,QForm:b.Z,QCardSection:k.Z,QIcon:W.Z,QItemSection:_.Z,QItemLabel:U.Z,QSeparator:S.Z,QInput:h.Z,QSelect:Z.Z,QCardActions:q.Z,QBtn:C.Z});var I=l(1442);const T={class:"row justify-between items-center"},D={class:"row no-wrap items-center q-gutter-x-md"},H={class:"bord"},P=(0,a.Uk)(" 상세정보 "),j=(0,a.Uk)(" 수정 "),A=(0,a.Uk)(" 삭제 "),B=(0,a.Uk)(" 새로고침 "),O={class:"q-mt-md row justify-center"},$={setup(e){const{notifyError:o}=(0,u.Z)(),l=(0,i.Z)(),p=(0,t.iH)(""),f=(0,t.iH)({sortBy:"desc",descending:!1,page:1,rowsPerPage:10}),g=(0,a.Fl)((()=>Math.ceil(d.value.length/f.value.rowsPerPage)));function w(e){l.dialog({component:V,componentProps:{item:e}}).onOk((async a=>{l.loading.show();try{a._id?await s.api.put("/device",{_id:e._id,...a}):await s.api.post("/device",a),r(),l.loading.hide()}catch(t){l.loading.hide(),o({message:"디바이스 추가(수정) 중 오류가 발생하였습니다.",caption:"잠시후에 다시 시도해 주세요. 오류가 계속되면 관리자에게 문의 해주세요."}),console.error(t)}}))}function v(e){l.dialog({component:I.Z,componentProps:{icon:"delete",iconColor:"red-10",title:"디바이스 삭제",caption:"선택된 디바이스를 삭제 합니다.",message:`${e.name}를 삭제 하시겠습니까?`}}).onOk((async()=>{l.loading.show();try{await s.api.get(`/device/delete?id=${e._id}`),r(),l.loading.hide()}catch(a){l.loading.hide(),o({message:"디바이스 추가(수정) 중 오류가 발생하였습니다.",caption:"잠시후에 다시 시도해 주세요. 오류가 계속되면 관리자에게 문의 해주세요."}),console.error(a)}}))}async function y(e){l.loading.show();try{await s.api.post("/device/refresh",e),l.loading.hide()}catch(o){l.loading.hide(),console.error(o)}}return(0,a.bv)((()=>{r()})),(e,o)=>{const l=(0,a.up)("q-icon"),i=(0,a.up)("q-input"),s=(0,a.up)("q-separator"),r=(0,a.up)("q-th"),u=(0,a.up)("q-tr"),b=(0,a.up)("q-td"),k=(0,a.up)("q-tooltip"),W=(0,a.up)("q-btn"),_=(0,a.up)("q-table"),U=(0,a.up)("q-pagination");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",T,[(0,a.Wm)(m.Z,{name:"장치 관리",caption:"하드웨어 등록 삭제 및 관리",icon:"svguse:icons.svg#serverColorPlus"}),(0,a._)("div",D,[(0,a.Wm)(i,{modelValue:p.value,"onUpdate:modelValue":o[0]||(o[0]=e=>p.value=e),filled:"",dense:"",clearable:"",label:"Search"},{append:(0,a.w5)((()=>[(0,a.Wm)(l,{name:"search"})])),_:1},8,["modelValue"]),(0,a.Wm)(s,{vertical:""}),(0,a.Wm)(l,{style:{cursor:"pointer"},name:"add_circle",color:"green-10",size:"30px",onClick:o[1]||(o[1]=e=>w())})])]),(0,a._)("div",H,[(0,a.Wm)(_,{style:{"border-radius":"0.5rem"},rows:(0,t.SU)(d),columns:(0,t.SU)(c),flat:"","wrap-cells":"","hide-pagination":"",pagination:f.value,filter:p.value},{header:(0,a.w5)((e=>[(0,a.Wm)(u,{class:"bg-grey-1",props:e},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.cols,(o=>((0,a.wg)(),(0,a.j4)(r,{key:o.name,props:e,class:"text-h6 text-bold"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(o.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,a.w5)((e=>[(0,a.Wm)(u,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{key:"index",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.row.index),1)])),_:2},1032,["props"]),(0,a.Wm)(b,{key:"name",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.row.name),1)])),_:2},1032,["props"]),(0,a.Wm)(b,{key:"ipaddress",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.row.ipaddress),1)])),_:2},1032,["props"]),(0,a.Wm)(b,{key:"deviceType",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.row.deviceType),1)])),_:2},1032,["props"]),(0,a.Wm)(b,{key:"mode",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.row.mode),1)])),_:2},1032,["props"]),(0,a.Wm)(b,{key:"actions",props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(W,{round:"",flat:"",icon:"info",size:"sm",color:"grey",onClick:o=>w(e.row)},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{class:"tooltip-bg",anchor:"top middle",self:"bottom middle",offset:[10,10]},{default:(0,a.w5)((()=>[P])),_:1})])),_:2},1032,["onClick"]),(0,a.Wm)(W,{round:"",flat:"",icon:"edit",size:"sm",color:"primary",onClick:o=>w(e.row)},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{class:"tooltip-bg",anchor:"top middle",self:"bottom middle",offset:[10,10]},{default:(0,a.w5)((()=>[j])),_:1})])),_:2},1032,["onClick"]),(0,a.Wm)(W,{round:"",flat:"",icon:"delete",size:"sm",color:"red-10",onClick:o=>v(e.row)},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{class:"tooltip-bg",anchor:"top middle",self:"bottom middle",offset:[10,10]},{default:(0,a.w5)((()=>[A])),_:1})])),_:2},1032,["onClick"]),(0,a.Wm)(W,{round:"",flat:"",icon:"refresh",size:"sm",color:"green-10",onClick:o=>y(e.row)},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{class:"tooltip-bg",anchor:"top middle",self:"bottom middle",offset:[10,10]},{default:(0,a.w5)((()=>[B])),_:1})])),_:2},1032,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","pagination","filter"])]),(0,a._)("div",O,[(0,a.Wm)(U,{modelValue:f.value.page,"onUpdate:modelValue":o[2]||(o[2]=e=>f.value.page=e),max:(0,t.SU)(g),"max-pages":10,"direction-links":"","boundary-links":""},null,8,["modelValue","max"])])],64)}}};var R=l(1746),M=l(9546),E=l(1682),K=l(7220),L=l(6858),F=l(3044);const N=$,X=N;Q()($,"components",{QInput:h.Z,QIcon:W.Z,QSeparator:S.Z,QTable:R.Z,QTr:M.Z,QTh:E.Z,QTd:K.Z,QBtn:C.Z,QTooltip:L.Z,QPagination:F.Z})}}]);